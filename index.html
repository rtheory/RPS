<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
</head>
<body>
  <script>
    const CHOICES = ["rock", "paper", "scissors"];

    function computerPlay(){
      let rand = Math.floor(Math.random() * CHOICES.length);
      return CHOICES[rand];
    }

    function playRound(playerSelection, computerSelection){      
      if (playerSelection === computerSelection) {
        return "It's a tie! Try again";
      } 

      if ((playerSelection === "paper" && computerSelection === "rock") || (playerSelection === "scissors" && computerSelection === "paper") || (playerSelection === "rock" && computerSelection === "scissors")){
        return `You Win! ${playerSelection} beats ${computerSelection}`;
      } 
      
      return `You Lose! ${computerSelection} beats ${playerSelection}`;
    }

    function getSelections(){
      let playerSelection = prompt("Rock, Paper, or Scissors?").toLowerCase();
      const computerSelection = computerPlay();

      // Make sure player types something valid
      while (!CHOICES.includes(playerSelection)){
        console.log("Invalid selection. Please select from rock, paper, or scissors")
        playerSelection = prompt("Rock, Paper, or Scissors?").toLowerCase();
      }

      return [playerSelection, computerSelection];
    }

    function game(rounds = 5){
      let playerScore = 0, computerScore = 0;

      // Play (loop) the number of rounds specified
      for (let round = 0; round < rounds; round++){

        // Get selections from player/computer and run the round
        let selections = getSelections();
        let result = playRound(selections[0], selections[1]);

        // Keep trying again if there was a tie
        while (result.includes("tie")) {
          console.log(result);
          let selections = getSelections();
          result = playRound(selections[0], selections[1]);
        } 
        
        // Increment scores based on result
        result.includes("Win") ? playerScore++ : computerScore++;

        // Print results of the round with newline
        console.log(result);
        console.log(`SCORES:  Player ${playerScore} : Computer ${computerScore}`)
        console.log('')
      }
      
      // Print whether or not the player won
      playerScore > computerScore ? console.log("You win!") : console.log("You lose :(")
    }

    game();
  </script>
</body>
</html>
